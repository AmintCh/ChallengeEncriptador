<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width"> 
        <title>Encripatador Alura</title>
        <link rel="stylesheet" href="style_encriptador.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200&display=swap" rel="stylesheet">
    </head>
    <body>      
        <header>
            <img src="imagenes/Logo.png">
        </header>
        <main>
            <section>
                <textarea class="mensaje" id="mensaje" name="mensaje" cols="40" rows="10" onkeypress="return  valideKey(event);" placeholder="Ingrese el texto"></textarea>
                <p class="informacion">Solo letras min√∫sculas y sin acentos</p> 
                <div class="botones">
                    <input class="btn-encriptar" name="encriptar" type="button" value = "Encriptar" onclick="encriptarMensaje()" >
                    <input class="btn-desencriptar" type="button" value = "desencriptar" onclick="desencriptarMensaje()" >
                </div>  
            </section>  
            <section>
                <textarea class="mensaje_out" id="mensajeEncriptado" name="mensajeEncriptado"cols="40" rows="10"></textarea>
            <div>
                <input class="btn-copiar" type="button" value = "copiar" class="copia" onclick="copiaraportapapeles()">
            </div>
            </section>
            
        </main>
        <script>    

           function encriptarMensaje(){
            var mensaje= document.getElementById('mensaje').value;
            var msjEncriptado= "";
            console.log(mensaje);

            var arreglo = mensaje.split("");
            var long=arreglo.length;
            console.table(arreglo);
            console.log(long);

            for(var i=0; i<long; i++){
                msjEncriptado+=encriptarCaracter(arreglo[i]);
            }
            document.getElementById("mensajeEncriptado").classList.remove("mensaje_out");
            document.getElementById("mensajeEncriptado").classList.add("mensaje_out_clear");
            $('#mensajeEncriptado').val(msjEncriptado);
            
           }

           function encriptarCaracter(caracter){
            if (caracter== "a"){
                return "ai";
            }else if (caracter== "e"){
                return "enter";
            }else if (caracter== "i"){
                return "imes";
            }else if (caracter== "o"){
                return "ober";
            }else if (caracter== "u"){
                return "ufat";
            }else{
                return caracter;
            }

           }

        function valideKey(evt){
            var code = (evt.which) ? evt.which : evt.keyCode;
            if(code==8) {
                return true;
            } else if((code>=97 && code<=122)||(code==241)||(code==32)) {
                return true;
            } else{
                return false;
            }
        }

        function desencriptarMensaje(){
            var mensaje= document.getElementById('mensaje').value;
            var msdDesencriptado= ""; 
            var posicion=0;
            console.log(mensaje);

            var arreglo = mensaje.split("");
            var long=arreglo.length;
            console.table(arreglo);
            console.log(long);
            for(var i=0; i<long; i++){
                posicion=desencriptarCaracter(arreglo[i]);
                msdDesencriptado+=arreglo[i];
                i+=posicion;
            }
            document.getElementById("mensajeEncriptado").classList.remove("mensaje_out");
            document.getElementById("mensajeEncriptado").classList.add("mensaje_out_clear");
            $('#mensajeEncriptado').val(msdDesencriptado);
        }
            
        function desencriptarCaracter(caracter){
            if (caracter== "a"){
                return 1;
            }else if (caracter== "e"){
                return 4;
            }else if (caracter== "i"){
                return 3;
            }else if (caracter== "o"){
                return 3;
            }else if (caracter== "u"){
                return 3;
            }else{
                return 0;
            }

           }
           function copiaraportapapeles() {


            var content = document.getElementById('mensajeEncriptado');


            content.select();

            document.execCommand('copy');


            alert("Copied!");
            $('#mensaje').val("");
            $('#mensajeEncriptado').val("");
            document.getElementById("mensajeEncriptado").classList.remove("mensaje_out_clear");
            document.getElementById("mensajeEncriptado").classList.add("mensaje_out");

        }
        </script>

    </body>
    
</html>


